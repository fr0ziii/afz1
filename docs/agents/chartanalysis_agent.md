# Chart Analysis Agent

## Description

The Chart Analysis Agent is designed to perform technical analysis on cryptocurrency charts. It fetches market data from Binance, calculates technical indicators, recognizes chart patterns, and generates trading signals based on these analyses. This agent is valuable for traders and analysts who want to automate the process of identifying potential trading opportunities based on technical chart analysis.

## Missions

This agent is designed to accomplish chart analysis missions, as defined in:
- [agent_missions/chartanalysis_agent.md](agent_missions/chartanalysis_agent.md)

## Configuration

The Chart Analysis Agent requires the following configuration parameters:

-   **agent_id**: A unique identifier for the agent instance.
-   **agent_type**:  Must be set to `ChartAnalysisAgent`.
-   **data_source**: Specifies the data source, e.g., `binance`.
-   **exchange**: The cryptocurrency exchange to use, e.g., `Binance`.
-   **trading_pair**: The trading pair to analyze, e.g., `XRP/USDT`.
-   **timeframe**: The chart timeframe, e.g., `5m` for 5 minutes.
-   **indicators**: A list of technical indicators to calculate, e.g., `["SMA", "EMA", "RSI", "MACD", "Bollinger Bands"]`.
-   **indicator_periods**: A dictionary defining the periods for each indicator. For example:
    ```json
    {
        "SMA": [20, 50],
        "EMA": [20, 50],
        "RSI": 14,
        "MACD": {"fast_period": 12, "slow_period": 26, "signal_period": 9}
    }
    ```
-   **patterns**: A list of chart patterns to recognize, e.g., `["TrendLines", "SupportResistance", "Triangles"]`.

### Example Configuration

```yaml
config:
  agent_id: chart_analysis_agent_01
  agent_type: ChartAnalysisAgent
  data_source: binance
  exchange: Binance
  trading_pair: XRP/USDT
  timeframe: 5m
  indicators: ["SMA", "EMA", "RSI", "MACD", "Bollinger Bands"]
  indicator_periods:
    SMA: [20, 50]
    EMA: [20, 50]
    RSI: 14
    MACD:
      fast_period: 12
      slow_period: 26
      signal_period: 9
  patterns: ["TrendLines", "SupportResistance", "Triangles"]
```

## Inputs and Outputs

### Inputs

-   **Market Data**: Candlestick data for the configured `trading_pair` and `timeframe` fetched from Binance using the `BinanceDataProvider`.

### Outputs

-   **Trading Signals**: Signals generated by the `SignalGenerator` based on technical indicator calculations and pattern recognition. These signals can indicate potential buy or sell opportunities.
-   **Technical Indicator Data**: DataFrames containing calculated technical indicators.
-   **Recognized Patterns**: Identified chart patterns like Doji, Trend Lines, etc.
-   **Logs**:  Informational and error logs for monitoring agent activity and debugging.

## Workflow

1.  **Fetch Chart Data**: The agent uses `BinanceDataProvider` to fetch candlestick data for the configured trading pair and timeframe from Binance.
2.  **Calculate Technical Indicators**:  `TechnicalIndicatorCalculator` calculates the specified technical indicators (SMA, EMA, RSI, MACD, Bollinger Bands) using the fetched chart data.
3.  **Recognize Chart Patterns**: `PatternRecognizer` identifies chart patterns (e.g., Doji) in the chart data.
4.  **Generate Trading Signals**: `SignalGenerator` generates trading signals based on the calculated indicators and recognized patterns.
5.  **Log Results**: The agent logs the calculated indicators, recognized patterns, and generated signals for monitoring and analysis.

## Example Usage

To run the Chart Analysis Agent with the example configuration provided above, you would typically instantiate and run the agent within a trading strategy or a script:

```python
from src.agents.chartanalysis_agent import ChartAnalysisAgent

config = {
  "agent_id": "chart_analysis_agent_01",
  "agent_type": "ChartAnalysisAgent",
  "data_source": "binance",
  "exchange": "Binance",
  "trading_pair": "XRP/USDT",
  "timeframe": "5m",
  "indicators": ["SMA", "EMA", "RSI", "MACD", "Bollinger Bands"],
  "indicator_periods": {
    "SMA": [20, 50],
    "EMA": [20, 50],
    "RSI": 14,
    "MACD": { "fast_period": 12, "slow_period": 26, "signal_period": 9 }
  },
  "patterns": ["TrendLines", "SupportResistance", "Triangles"],
}

agent = ChartAnalysisAgent(config)
agent.run()
```

This will fetch chart data for XRP/USDT on the 5m timeframe from Binance, calculate the specified technical indicators, recognize patterns, and generate trading signals, logging the results.

## Code Location

-   `src/agents/chartanalysis_agent.py`

## Components

-   **`src/components/chart_data_provider.py` (BinanceDataProvider)**: Fetches historical and real-time candlestick data from the Binance exchange. It handles API requests to Binance and provides data in a format suitable for analysis.
-   **`src/components/pattern_recognizer.py` (PatternRecognizer)**:  Analyzes chart data to identify various candlestick patterns such as Doji, Engulfing Patterns, and more. It uses technical analysis techniques to detect these patterns.
-   **`src/components/technical_indicator_calculator.py` (TechnicalIndicatorCalculator)**: Calculates a range of technical indicators like Simple Moving Average (SMA), Exponential Moving Average (EMA), Relative Strength Index (RSI), MACD, and Bollinger Bands. These indicators are used to understand market trends and conditions.
-   **`src/components/signal_generator.py` (SignalGenerator)**:  Generates trading signals based on the analysis from the `TechnicalIndicatorCalculator` and `PatternRecognizer`. It interprets indicator values and pattern occurrences to suggest potential trading actions (buy/sell signals).

## Notes and Considerations

-   **API Keys**: Ensure that your Binance API keys are securely configured if you intend to use this agent for live trading or fetching real-time data. API keys are not included in the configuration example but may be required depending on the data provider setup.
-   **Configuration Tuning**: The effectiveness of the trading signals generated by this agent heavily depends on the chosen technical indicators, their periods, and the patterns being recognized. Users should carefully tune the configuration parameters based on their trading strategy and the market conditions.
-   **Error Handling**: The agent includes basic error handling and logging, but for production use, more robust error handling and monitoring mechanisms should be implemented.
-   **Backtesting**: Before deploying this agent in a live trading environment, it is highly recommended to backtest its performance using historical data to evaluate its effectiveness and optimize its configuration.